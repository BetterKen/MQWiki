# Kafka和RabbitMQ的比较

|      功能项       |                      Kafka（1.1.0版本）                      |                    RabbitMQ（3.6.10版本）                    |
| :---------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
|    优先级队列     |                            不支持                            |              支持。建议优先级大小设置在0-10之间              |
|     延迟队列      |                            不支持                            |                             支持                             |
|     死信队列      |                            不支持                            |                             支持                             |
|     重试队列      |                            不支持                            |                            不支持                            |
|     消费模式      |                             pull                             |                          pull+push                           |
|     广播消费      |                             支持                             |                             支持                             |
|     消息回溯      |      Kafka支持按照offset和timestamp两种维度进行消息回溯      |      不支持。RabbitMQ中消息一旦被确认消费就会被标记删除      |
|     消息堆积      |                             支持                             |                             支持                             |
|      持久化       |                             支持                             |                             支持                             |
|     消息过滤      |               通过客户端interceptor拦截器实现                |                            不支持                            |
|     消息追踪      | 不支持。消息追踪可以通过外部系统来支持，但是支持粒度没有内置的细腻。 | 支持。RabbitMQ中可以采用Firehose或者rabbitmq_tracing插件实现。不过开启rabbitmq_tracing插件件会大幅影响性能，不建议生产环境开启，反倒是可以使用Firehose与外部链路系统结合提供高细腻度的消息追踪支持。 |
| 多租户(vhost)支持 |                            不支持                            |                             支持                             |
|    多协议支持     |                        只支持定义协议                        |  RabbitMQ本身就是AMQP协议的实现，同时支持MQTT、STOMP等协议   |
|    跨语言支持     |          采用Scala和Java编写，支持多种语言的客户端           |             采用Erlang编写，支持多种语言的客户端             |
|      幂等性       |              支持单个生产者单分区单会话的幂等性              |                            不支持                            |
|    事务性消息     |                             支持                             |                             支持                             |
|    消息顺序性     |             支持单分区（partition）级别的顺序性              | 顺序性的条件比较苛刻，需要单线程发送、单线程消费并且不采用延迟队列、优先级队列等一些高级功能，从某种意义上来说不算支持顺序性 |
|     安全机制      |         （TLS/SSL、SASL）身份认证和（读写）权限控制          |                         与Kafka相似                          |
|     控制中心      |                      外部依赖zookeeper                       |                      自己实现的NameSrv                       |
|    单机吞吐量     |                            十万级                            |                             万级                             |
| topic对吞吐量影响 | topic 从几十到几百个时候，吞吐量会大幅度下降，在同等机器下，Kafka 尽量保证 topic 数量不要过多，如果要支撑大规模的 topic，需要增加更多的机器资源 |                              －                              |
|      时效性       |                            微妙级                            |                             ms级                             |
|      可靠性       |                           基本不丢                           |              经过参数优化配置，可以做到 0 丢失               |

​		

